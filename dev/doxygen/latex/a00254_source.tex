\hypertarget{a00254_source}{}\doxysection{adaptivestepsizing.\+hh}
\label{a00254_source}\index{adaptivestepsizing.hh@{adaptivestepsizing.hh}}
\mbox{\hyperlink{a00254}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// SPDX-\/FileCopyrightText: 2021-\/2024 The Ikarus Developers mueller@ibb.uni-\/stuttgart.de}}
\DoxyCodeLine{2 \textcolor{comment}{// SPDX-\/License-\/Identifier: LGPL-\/3.0-\/or-\/later}}
\DoxyCodeLine{3 }
\DoxyCodeLine{12 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{a00266}{ikarus/controlroutines/pathfollowingfunctions.hh}}>}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{a00236}{ikarus/solver/nonlinearsolver/solverinfos.hh}}>}}
\DoxyCodeLine{16 }
\DoxyCodeLine{17 \textcolor{keyword}{namespace }\mbox{\hyperlink{a00317}{Ikarus::AdaptiveStepSizing}} \{}
\DoxyCodeLine{18 }
\DoxyCodeLine{24 \textcolor{keyword}{struct }\mbox{\hyperlink{a01176}{NoOp}}}
\DoxyCodeLine{25 \{}
\DoxyCodeLine{35   \textcolor{keyword}{template} <\textcolor{keyword}{typename} NonLinearOperator>}
\DoxyCodeLine{36   \textcolor{keywordtype}{void} \mbox{\hyperlink{a01176_ada90a32692ed0e5c05867ca427e38d18}{operator()}}(\textcolor{keyword}{const} \mbox{\hyperlink{a01428}{NonLinearSolverInformation}}\& solverInfo, \mbox{\hyperlink{a01196}{SubsidiaryArgs}}\& subsidiaryArgs,}
\DoxyCodeLine{37                   \textcolor{keyword}{const} \mbox{\hyperlink{a01540}{NonLinearOperator}}\& nonLinearOperator) \{\}}
\DoxyCodeLine{38 }
\DoxyCodeLine{43   [[nodiscard]] \textcolor{keywordtype}{int} \mbox{\hyperlink{a01176_af42dff6b9945230918607a14f159e52e}{targetIterations}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} 0; \}}
\DoxyCodeLine{44 }
\DoxyCodeLine{49   \textcolor{keywordtype}{void} \mbox{\hyperlink{a01176_aae9af895e735c2c5f87a9e2eb77aa737}{setTargetIterations}}([[maybe\_unused]] \textcolor{keywordtype}{int} \mbox{\hyperlink{a01176_af42dff6b9945230918607a14f159e52e}{targetIterations}}) \{\}}
\DoxyCodeLine{50 \};}
\DoxyCodeLine{51 }
\DoxyCodeLine{62 \textcolor{keyword}{struct }\mbox{\hyperlink{a01180}{IterationBased}}}
\DoxyCodeLine{63 \{}
\DoxyCodeLine{73   \textcolor{keyword}{template} <\textcolor{keyword}{typename} NonLinearOperator>}
\DoxyCodeLine{74   \textcolor{keywordtype}{void} \mbox{\hyperlink{a01180_adbaaeb5daa06234f1886efa3f7bc8f1a}{operator()}}(\textcolor{keyword}{const} \mbox{\hyperlink{a01428}{NonLinearSolverInformation}}\& solverInfo, \mbox{\hyperlink{a01196}{SubsidiaryArgs}}\& subsidiaryArgs,}
\DoxyCodeLine{75                   \textcolor{keyword}{const} \mbox{\hyperlink{a01540}{NonLinearOperator}}\&) \{}
\DoxyCodeLine{76     \textcolor{keywordflow}{if} (subsidiaryArgs.\mbox{\hyperlink{a01196_a217c729e1ae8b05a98c852f19b0d6ae5}{currentStep}} == 0)}
\DoxyCodeLine{77       \textcolor{keywordflow}{return};}
\DoxyCodeLine{78     \textcolor{keywordflow}{if} (targetIterations\_ == 0)}
\DoxyCodeLine{79       DUNE\_THROW(Dune::InvalidStateException,}
\DoxyCodeLine{80                  \textcolor{stringliteral}{"{}For IterationBased, targetIterations should not be equal to 0. Try calling "{}}}
\DoxyCodeLine{81                  \textcolor{stringliteral}{"{}setTargetIterations(int) first."{}});}
\DoxyCodeLine{82     \textcolor{keyword}{const} \textcolor{keyword}{auto} previousIterations = solverInfo.\mbox{\hyperlink{a01428_a81570cd3d9f6589a4d1ba81211f41b99}{iterations}};}
\DoxyCodeLine{83     \textcolor{keywordflow}{if} (previousIterations > targetIterations\_)}
\DoxyCodeLine{84       subsidiaryArgs.\mbox{\hyperlink{a01196_a9c0bca7ed999dcf751648d41b5d9aa78}{stepSize}} =}
\DoxyCodeLine{85           sqrt(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(targetIterations\_) / previousIterations) * subsidiaryArgs.\mbox{\hyperlink{a01196_a9c0bca7ed999dcf751648d41b5d9aa78}{stepSize}};}
\DoxyCodeLine{86   \}}
\DoxyCodeLine{87 }
\DoxyCodeLine{92   [[nodiscard]] \textcolor{keywordtype}{int} \mbox{\hyperlink{a01180_aabdaad05b950b53e014624271a16fd9c}{targetIterations}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} targetIterations\_; \}}
\DoxyCodeLine{93 }
\DoxyCodeLine{98   \textcolor{keywordtype}{void} \mbox{\hyperlink{a01180_a52017ebcd89859d5ae214cc8767ef78d}{setTargetIterations}}(\textcolor{keywordtype}{int} \mbox{\hyperlink{a01180_aabdaad05b950b53e014624271a16fd9c}{targetIterations}}) \{ targetIterations\_ = \mbox{\hyperlink{a01180_aabdaad05b950b53e014624271a16fd9c}{targetIterations}}; \}}
\DoxyCodeLine{99 }
\DoxyCodeLine{100 \textcolor{keyword}{private}:}
\DoxyCodeLine{101   \textcolor{keywordtype}{int} targetIterations\_\{0\};}
\DoxyCodeLine{102 \};}
\DoxyCodeLine{103 \} \textcolor{comment}{// namespace Ikarus::AdaptiveStepSizing}}

\end{DoxyCode}

\hypertarget{a00035_source}{}\doxysection{strainconversions.\+hh}
\label{a00035_source}\index{strainconversions.hh@{strainconversions.hh}}
\mbox{\hyperlink{a00035}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// SPDX-\/FileCopyrightText: 2021-\/2024 The Ikarus Developers mueller@ibb.uni-\/stuttgart.de}}
\DoxyCodeLine{2 \textcolor{comment}{// SPDX-\/License-\/Identifier: LGPL-\/3.0-\/or-\/later}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{a00041}{tags.hh}}"{}}}
\DoxyCodeLine{5 }
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <unsupported/Eigen/MatrixFunctions>}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include <Eigen/Core>}}
\DoxyCodeLine{9 }
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{a00098}{ikarus/utils/tensorutils.hh}}>}}
\DoxyCodeLine{11 }
\DoxyCodeLine{12 \textcolor{keyword}{namespace }\mbox{\hyperlink{a00219}{Ikarus}} \{}
\DoxyCodeLine{13   \textcolor{keyword}{namespace }Impl \{}
\DoxyCodeLine{14     \textcolor{keyword}{template} <\textcolor{keyword}{typename} Derived>}
\DoxyCodeLine{15     \textcolor{keyword}{decltype}(\textcolor{keyword}{auto}) mayTransformFromVoigt(\textcolor{keyword}{const} Eigen::MatrixBase<Derived>\& e, \textcolor{keywordtype}{bool} isStrain = \textcolor{keyword}{true}) \{}
\DoxyCodeLine{16       \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (Concepts::EigenVector<Derived>)}
\DoxyCodeLine{17         \textcolor{keywordflow}{return} \mbox{\hyperlink{a00219_a518e0394f7c90dbe798b6cb8d757b822}{fromVoigt}}(e.derived(), isStrain);}
\DoxyCodeLine{18       \textcolor{keywordflow}{else}}
\DoxyCodeLine{19         \textcolor{keywordflow}{return} e;}
\DoxyCodeLine{20     \}}
\DoxyCodeLine{21   \}  \textcolor{comment}{// namespace Impl}}
\DoxyCodeLine{22 }
\DoxyCodeLine{23   \textcolor{keyword}{template} <StrainTags tag, \textcolor{keyword}{typename} Derived>}
\DoxyCodeLine{24   \textcolor{keyword}{auto} \mbox{\hyperlink{a00219_ad5aa30fe829c7316a0a744b3438609f5}{createGreenLagrangianStrains}}(\textcolor{keyword}{const} Eigen::MatrixBase<Derived>\& eMB) \{}
\DoxyCodeLine{25     \textcolor{keyword}{const} \textcolor{keyword}{auto}\& e = eMB.derived();}
\DoxyCodeLine{26     \textcolor{keyword}{static\_assert}(Concepts::EigenMatrix33<Derived>);}
\DoxyCodeLine{27     \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (tag == StrainTags::greenLagrangian)}
\DoxyCodeLine{28       \textcolor{keywordflow}{return} e;}
\DoxyCodeLine{29     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (tag == StrainTags::deformationGradient)}
\DoxyCodeLine{30       \textcolor{keywordflow}{return} (0.5 * (e.transpose() * e -\/ Derived::Identity())).eval();}
\DoxyCodeLine{31     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (tag == StrainTags::displacementGradient)}
\DoxyCodeLine{32       \textcolor{keywordflow}{return} (0.5 * (e + e.transpose() + e.transpose() * e)).eval();}
\DoxyCodeLine{33     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (tag == StrainTags::rightCauchyGreenTensor)}
\DoxyCodeLine{34       \textcolor{keywordflow}{return} (0.5 * (e -\/ Derived::Identity())).eval();}
\DoxyCodeLine{35   \}}
\DoxyCodeLine{36 }
\DoxyCodeLine{37   \textcolor{keyword}{template} <StrainTags tag, \textcolor{keyword}{typename} Derived>}
\DoxyCodeLine{38   \textcolor{keyword}{decltype}(\textcolor{keyword}{auto}) \mbox{\hyperlink{a00219_a5293eb09f12e4a45a7aa19a3403a73d1}{createDeformationGradient}}(\textcolor{keyword}{const} Eigen::MatrixBase<Derived>\& eMB) \{}
\DoxyCodeLine{39     \textcolor{keyword}{const} \textcolor{keyword}{auto}\& e = eMB.derived();}
\DoxyCodeLine{40 }
\DoxyCodeLine{41     \textcolor{keyword}{static\_assert}(Concepts::EigenMatrix33<Derived>);}
\DoxyCodeLine{42     \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (tag == StrainTags::greenLagrangian) \{}
\DoxyCodeLine{43       \textcolor{comment}{// E = 0.5 * (F \string^ 2 -\/ I);}}
\DoxyCodeLine{44       \textcolor{comment}{// 2*E = F \string^ 2 -\/ I;}}
\DoxyCodeLine{45       \textcolor{comment}{// 2*E+I = F \string^ 2;}}
\DoxyCodeLine{46       \textcolor{comment}{// sqrt(2*E+I) = F;}}
\DoxyCodeLine{47       \textcolor{keywordflow}{return} ((2 * e + Derived::Identity()).sqrt()).\mbox{\hyperlink{a00219_a746ffb7ea71ab7ea16727793ff59c3c7}{eval}}();}
\DoxyCodeLine{48     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (tag == StrainTags::deformationGradient)}
\DoxyCodeLine{49       \textcolor{keywordflow}{return} e;}
\DoxyCodeLine{50     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (tag == StrainTags::displacementGradient)}
\DoxyCodeLine{51       \textcolor{keywordflow}{return} (e + Derived::Identity()).\mbox{\hyperlink{a00219_a746ffb7ea71ab7ea16727793ff59c3c7}{eval}}();}
\DoxyCodeLine{52     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (tag == StrainTags::rightCauchyGreenTensor) \{}
\DoxyCodeLine{53       \textcolor{keywordflow}{return} (e.sqrt()).\mbox{\hyperlink{a00219_a746ffb7ea71ab7ea16727793ff59c3c7}{eval}}();  \textcolor{comment}{// this looses information, since the rotation information from an original F is lost!}}
\DoxyCodeLine{54     \}}
\DoxyCodeLine{55   \}}
\DoxyCodeLine{56 }
\DoxyCodeLine{57   \textcolor{keyword}{template} <StrainTags tag, \textcolor{keyword}{typename} Derived>}
\DoxyCodeLine{58   \textcolor{keyword}{decltype}(\textcolor{keyword}{auto}) \mbox{\hyperlink{a00219_ae53e0e7999f565fc94610d1c4ede0d16}{createRightCauchyGreen}}(\textcolor{keyword}{const} Eigen::MatrixBase<Derived>\& eMB) \{}
\DoxyCodeLine{59     \textcolor{keyword}{const} \textcolor{keyword}{auto}\& e = eMB.derived();}
\DoxyCodeLine{60     \textcolor{keyword}{static\_assert}(Concepts::EigenMatrix33<Derived>);}
\DoxyCodeLine{61     \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (tag == StrainTags::greenLagrangian) \{}
\DoxyCodeLine{62       \textcolor{comment}{// E = 0.5 * (C -\/ I);}}
\DoxyCodeLine{63       \textcolor{comment}{// 2*E = C -\/ I;}}
\DoxyCodeLine{64       \textcolor{comment}{// 2*E+I = C;}}
\DoxyCodeLine{65       \textcolor{keywordflow}{return} (2 * e + Derived::Identity()).\mbox{\hyperlink{a00219_a746ffb7ea71ab7ea16727793ff59c3c7}{eval}}();}
\DoxyCodeLine{66     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (tag == StrainTags::deformationGradient)}
\DoxyCodeLine{67       \textcolor{keywordflow}{return} (e.transpose() * e).\mbox{\hyperlink{a00219_a746ffb7ea71ab7ea16727793ff59c3c7}{eval}}();}
\DoxyCodeLine{68     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (tag == StrainTags::displacementGradient) \{}
\DoxyCodeLine{69       \textcolor{keyword}{const} \textcolor{keyword}{auto} F = e + Derived::Identity();}
\DoxyCodeLine{70       \textcolor{keywordflow}{return} (F.transpose() * F).eval();}
\DoxyCodeLine{71     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (tag == StrainTags::rightCauchyGreenTensor) \{}
\DoxyCodeLine{72       \textcolor{keywordflow}{return} e;}
\DoxyCodeLine{73     \}}
\DoxyCodeLine{74   \}}
\DoxyCodeLine{75 }
\DoxyCodeLine{76   \textcolor{keyword}{template} <StrainTags from, StrainTags to, \textcolor{keyword}{typename} Derived>}
\DoxyCodeLine{77   \textcolor{keyword}{decltype}(\textcolor{keyword}{auto}) \mbox{\hyperlink{a00219_ae9c00f19ce473d7183c87aa84b247f88}{transformStrain}}(\textcolor{keyword}{const} Eigen::MatrixBase<Derived>\& eRaw) \{}
\DoxyCodeLine{78     \textcolor{keyword}{static\_assert}((from == to) or (from != StrainTags::linear and to != StrainTags::linear),}
\DoxyCodeLine{79                   \textcolor{stringliteral}{"{}No useful transformation available for linear strains."{}});}
\DoxyCodeLine{80     \textcolor{keyword}{decltype}(\textcolor{keyword}{auto}) e = Impl::mayTransformFromVoigt(eRaw, \textcolor{keyword}{true});}
\DoxyCodeLine{81     \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (from == to)}
\DoxyCodeLine{82       \textcolor{keywordflow}{return} e;}
\DoxyCodeLine{83     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (to == StrainTags::greenLagrangian)}
\DoxyCodeLine{84       \textcolor{keywordflow}{return} createGreenLagrangianStrains<from>(e);}
\DoxyCodeLine{85     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (to == StrainTags::deformationGradient)}
\DoxyCodeLine{86       \textcolor{keywordflow}{return} createDeformationGradient<from>(e);}
\DoxyCodeLine{87     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (to == StrainTags::rightCauchyGreenTensor) \{}
\DoxyCodeLine{88       \textcolor{keywordflow}{return} createRightCauchyGreen<from>(e);}
\DoxyCodeLine{89     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{90       \textcolor{keyword}{static\_assert}(to == StrainTags::greenLagrangian or to == StrainTags::deformationGradient}
\DoxyCodeLine{91                     or to == StrainTags::rightCauchyGreenTensor);}
\DoxyCodeLine{92   \}}
\DoxyCodeLine{93 \}  \textcolor{comment}{// namespace Ikarus}}

\end{DoxyCode}

\hypertarget{a00113_source}{}\doxysection{init.\+hh}
\label{a00113_source}\index{init.hh@{init.hh}}
\mbox{\hyperlink{a00113}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// SPDX-\/FileCopyrightText: 2021-\/2024 The Ikarus Developers mueller@ibb.uni-\/stuttgart.de}}
\DoxyCodeLine{2 \textcolor{comment}{// SPDX-\/License-\/Identifier: LGPL-\/3.0-\/or-\/later}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <chrono>}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <utility>}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include <dune/common/parallel/mpihelper.hh>}}
\DoxyCodeLine{9 }
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <spdlog/details/registry.h>}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <spdlog/fmt/chrono.h>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <spdlog/fmt/ostr.h>}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <spdlog/fmt/ranges.h>}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <spdlog/sinks/basic\_file\_sink.h>}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include <spdlog/sinks/stdout\_color\_sinks.h>}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include <spdlog/spdlog.h>}}
\DoxyCodeLine{17 }
\DoxyCodeLine{18 \textcolor{keyword}{namespace }\mbox{\hyperlink{a00219}{Ikarus}} \{}
\DoxyCodeLine{19 }
\DoxyCodeLine{20   \textcolor{keyword}{class }\mbox{\hyperlink{a01385}{IkarusInstance}} \{}
\DoxyCodeLine{21   \textcolor{keyword}{public}:}
\DoxyCodeLine{22     \textcolor{keyword}{static} \mbox{\hyperlink{a01385}{IkarusInstance}}\& \mbox{\hyperlink{a01385_a76a31b1d9f5b1fba7180451b1edddf0a}{getInstance}}() \{}
\DoxyCodeLine{23       \textcolor{keyword}{static} \mbox{\hyperlink{a01385}{IkarusInstance}} instance;}
\DoxyCodeLine{24       \textcolor{keywordflow}{return} instance;}
\DoxyCodeLine{25     \}}
\DoxyCodeLine{26 }
\DoxyCodeLine{27     \textcolor{keywordtype}{void} \mbox{\hyperlink{a01385_a833f9b23184e3d0f5b06f5b7b85d9233}{enableFileLogger}}(std::string\&\& filename = \textcolor{stringliteral}{"{}"{}}) \{}
\DoxyCodeLine{28       \textcolor{keyword}{using namespace }std::chrono;}
\DoxyCodeLine{29       std::string currentTime = fmt::format(\textcolor{stringliteral}{"{}\_\{\}"{}}, std::chrono::system\_clock::now());}
\DoxyCodeLine{30 }
\DoxyCodeLine{31       std::ranges::transform(currentTime, currentTime.begin(), [](\textcolor{keywordtype}{char} ch) \{}
\DoxyCodeLine{32         return (ch == \textcolor{stringliteral}{' '} or ch == \textcolor{stringliteral}{':'}) ? \textcolor{stringliteral}{'\_'} : ch;}
\DoxyCodeLine{33       \});  \textcolor{comment}{// replace space and colon with underscore}}
\DoxyCodeLine{34       \textcolor{keyword}{auto} logFilename = (filename.empty() ? executableName : filename) + currentTime + \textcolor{stringliteral}{"{}.log"{}};}
\DoxyCodeLine{35       \textcolor{keyword}{auto} file\_sink   = std::make\_shared<spdlog::sinks::basic\_file\_sink\_mt>(logFilename, \textcolor{keyword}{true});}
\DoxyCodeLine{36       file\_sink-\/>set\_pattern(\textcolor{stringliteral}{"{}\%v"{}});}
\DoxyCodeLine{37       file\_sink-\/>set\_level(spdlog::level::trace);}
\DoxyCodeLine{38       \textcolor{keyword}{auto} logger = spdlog::default\_logger();}
\DoxyCodeLine{39       logger-\/>sinks().push\_back(file\_sink);}
\DoxyCodeLine{40     \}}
\DoxyCodeLine{41 }
\DoxyCodeLine{42   \textcolor{keyword}{private}:}
\DoxyCodeLine{43     \textcolor{keyword}{friend} \textcolor{keywordtype}{void} \mbox{\hyperlink{a01385_a4865c52ed9d7e9c0f00e8bd5295ee853}{init}}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char}** argv, \textcolor{keywordtype}{bool} \mbox{\hyperlink{a01385_a833f9b23184e3d0f5b06f5b7b85d9233}{enableFileLogger}});}
\DoxyCodeLine{44     \mbox{\hyperlink{a01385}{IkarusInstance}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{45     std::string executableName;}
\DoxyCodeLine{46 }
\DoxyCodeLine{47   \textcolor{keyword}{public}:}
\DoxyCodeLine{48     \mbox{\hyperlink{a01385_a5310bd753ef99eb8cd3814f93b6fc345}{IkarusInstance}}(\mbox{\hyperlink{a01385}{IkarusInstance}} \textcolor{keyword}{const}\&) = \textcolor{keyword}{delete};}
\DoxyCodeLine{49     \textcolor{keywordtype}{void} \mbox{\hyperlink{a01385_a77f7470b50ebee705f221d80b689f6f5}{operator=}}(\mbox{\hyperlink{a01385}{IkarusInstance}} \textcolor{keyword}{const}\&) = \textcolor{keyword}{delete};}
\DoxyCodeLine{50   \};}
\DoxyCodeLine{51 }
\DoxyCodeLine{52   \textcolor{keywordtype}{void} \mbox{\hyperlink{a00219_ac8243891c1b961e50a066140ab79a142}{init}}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char}** argv, \textcolor{keywordtype}{bool} enableFileLogger = \textcolor{keyword}{true}) \{}
\DoxyCodeLine{53     Dune::MPIHelper::instance(argc, argv);}
\DoxyCodeLine{54     \textcolor{keyword}{auto}\& instance          = \mbox{\hyperlink{a01385_a76a31b1d9f5b1fba7180451b1edddf0a}{IkarusInstance::getInstance}}();}
\DoxyCodeLine{55     instance.executableName = argv[0];}
\DoxyCodeLine{56     \textcolor{keyword}{auto} logger             = spdlog::default\_logger();}
\DoxyCodeLine{57     logger-\/>set\_pattern(\textcolor{stringliteral}{"{}\%v"{}});}
\DoxyCodeLine{58     \textcolor{keywordflow}{if} (enableFileLogger) instance.enableFileLogger();}
\DoxyCodeLine{59 }
\DoxyCodeLine{60     \textcolor{keyword}{auto} currentTime = std::chrono::system\_clock::now();}
\DoxyCodeLine{61     std::chrono::year\_month\_day currentYearMonthDay\{floor<std::chrono::days>(currentTime)\};}
\DoxyCodeLine{62 }
\DoxyCodeLine{63     spdlog::info(\textcolor{stringliteral}{"{}Start of execution: \{\}"{}}, currentTime);}
\DoxyCodeLine{65     spdlog::info(R\textcolor{stringliteral}{"{}xxx(    \_/\_/\_/  \_/    \_/    \_/\_/    \_/\_/\_/    \_/    \_/    \_/\_/\_/)xxx"{});}}
\DoxyCodeLine{66 \textcolor{stringliteral}{    spdlog::info(R}\textcolor{stringliteral}{"{}xxx(     \_/    \_/  \_/    \_/    \_/  \_/    \_/  \_/    \_/  \_/       )xxx"{});}}
\DoxyCodeLine{67 \textcolor{stringliteral}{    spdlog::info(R}\textcolor{stringliteral}{"{}xxx(    \_/    \_/\_/      \_/\_/\_/\_/  \_/\_/\_/    \_/    \_/    \_/\_/    )xxx"{});}}
\DoxyCodeLine{68 \textcolor{stringliteral}{    spdlog::info(R}\textcolor{stringliteral}{"{}xxx(   \_/    \_/  \_/    \_/    \_/  \_/    \_/  \_/    \_/        \_/   )xxx"{});}}
\DoxyCodeLine{69 \textcolor{stringliteral}{    spdlog::info(R}\textcolor{stringliteral}{"{}xxx(\_/\_/\_/  \_/    \_/  \_/    \_/  \_/    \_/    \_/\_/    \_/\_/\_/      )xxx"{});}}
\DoxyCodeLine{70 \textcolor{stringliteral}{}}
\DoxyCodeLine{71 \textcolor{stringliteral}{    spdlog::info(}\textcolor{stringliteral}{"{}© 2021-\/\{\} The Ikarus Developers, see LICENSE.md "{}}, \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(currentYearMonthDay.year()));}
\DoxyCodeLine{72     spdlog::info(\textcolor{stringliteral}{"{}You are using Ikarus v\{\}. Please don't forget to cite us:"{}}, IKARUS\_VERSION);}
\DoxyCodeLine{73     spdlog::info(}
\DoxyCodeLine{74         \textcolor{stringliteral}{"{}Müller, A., \& Vinod Kumar Mitruka, T. K. M. (2023). Ikarus v0.3 (Version V1). Version V1. "{}}}
\DoxyCodeLine{75         \textcolor{stringliteral}{"{}doi:<https://doi.org/10.18419/darus-\/3303>"{}});}
\DoxyCodeLine{76   \}}
\DoxyCodeLine{77 \}  \textcolor{comment}{// namespace Ikarus}}

\end{DoxyCode}

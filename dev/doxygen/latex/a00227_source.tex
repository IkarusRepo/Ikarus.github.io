\hypertarget{a00227_source}{}\doxysection{ferequirements.\+hh}
\label{a00227_source}\index{ferequirements.hh@{ferequirements.hh}}
\mbox{\hyperlink{a00227}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// SPDX-\/FileCopyrightText: 2021-\/2024 The Ikarus Developers mueller@ibb.uni-\/stuttgart.de}}
\DoxyCodeLine{2 \textcolor{comment}{// SPDX-\/License-\/Identifier: LGPL-\/3.0-\/or-\/later}}
\DoxyCodeLine{3 }
\DoxyCodeLine{10 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{11 }
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <iosfwd>}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <map>}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <set>}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{16 }
\DoxyCodeLine{17 \textcolor{preprocessor}{\#include <dune/common/exceptions.hh>}}
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{preprocessor}{\#include <Eigen/Core>}}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{a00032}{ikarus/utils/makeenum.hh}}>}}
\DoxyCodeLine{22 }
\DoxyCodeLine{23 \textcolor{keyword}{namespace }\mbox{\hyperlink{a00316}{Ikarus}} \{}
\DoxyCodeLine{24 \textcolor{comment}{// clang-\/format off}}
\DoxyCodeLine{30 \textcolor{comment}{}  \mbox{\hyperlink{a00311_ga14ad7d33267cea1c93f97f3998081657}{MAKE\_ENUM}}(\mbox{\hyperlink{a00302_ga8a33210894e12be4feb3d96fdfde215c}{ScalarAffordances}},}
\DoxyCodeLine{31             noAffordance,}
\DoxyCodeLine{32             mechanicalPotentialEnergy,}
\DoxyCodeLine{33             microMagneticPotentialEnergy}
\DoxyCodeLine{34       );}
\DoxyCodeLine{35 }
\DoxyCodeLine{41   \mbox{\hyperlink{a00311_ga14ad7d33267cea1c93f97f3998081657}{MAKE\_ENUM}}(\mbox{\hyperlink{a00302_ga122268ff4d2c0beee58799d85ba5e52a}{VectorAffordances}},}
\DoxyCodeLine{42             noAffordance,}
\DoxyCodeLine{43             \mbox{\hyperlink{a00316_a8d0ca59930b7ae15351497bd14319d1d}{forces}},}
\DoxyCodeLine{44             microMagneticForces}
\DoxyCodeLine{45       );}
\DoxyCodeLine{46 }
\DoxyCodeLine{52   \mbox{\hyperlink{a00311_ga14ad7d33267cea1c93f97f3998081657}{MAKE\_ENUM}}(\mbox{\hyperlink{a00302_ga52cb89165daabb500f6e2eb68ddd76ee}{MatrixAffordances}},}
\DoxyCodeLine{53             noAffordance,}
\DoxyCodeLine{54             \mbox{\hyperlink{a00316_a5185740b975fb7539a6e07553a061b26}{stiffness}},}
\DoxyCodeLine{55             materialstiffness,}
\DoxyCodeLine{56             geometricstiffness,}
\DoxyCodeLine{57             \mbox{\hyperlink{a00316_a8191d0e317e1bea2a35d6c8a8f20750f}{stiffnessdiffBucklingVector}},}
\DoxyCodeLine{58             microMagneticHessian,}
\DoxyCodeLine{59             \mbox{\hyperlink{a00316_a7e05e861b25ca636c1ccba4b8d2a3831}{mass}}}
\DoxyCodeLine{60       );}
\DoxyCodeLine{61 }
\DoxyCodeLine{67   \mbox{\hyperlink{a00311_ga14ad7d33267cea1c93f97f3998081657}{MAKE\_ENUM}}(\mbox{\hyperlink{a00303_ga0c1577fd05efee8475b0f7fef795bbbe}{FEParameter}},}
\DoxyCodeLine{68             noParameter,}
\DoxyCodeLine{69             loadfactor,}
\DoxyCodeLine{70             time}
\DoxyCodeLine{71       );}
\DoxyCodeLine{72 }
\DoxyCodeLine{78   \mbox{\hyperlink{a00311_ga14ad7d33267cea1c93f97f3998081657}{MAKE\_ENUM}}(\mbox{\hyperlink{a00303_gaea763c94a1cecbeefc4f8661debcc5a3}{FESolutions}},}
\DoxyCodeLine{79             noSolution,}
\DoxyCodeLine{80             displacement,}
\DoxyCodeLine{81             velocity,}
\DoxyCodeLine{82             director,}
\DoxyCodeLine{83             magnetizationAndVectorPotential}
\DoxyCodeLine{84       );}
\DoxyCodeLine{85 }
\DoxyCodeLine{91   \mbox{\hyperlink{a00311_ga14ad7d33267cea1c93f97f3998081657}{MAKE\_ENUM}}(\mbox{\hyperlink{a00303_ga531be167e924b749eb8b4ccc7f1c18c9}{ResultType}},}
\DoxyCodeLine{92             noType,}
\DoxyCodeLine{93             magnetization,}
\DoxyCodeLine{94             gradientNormOfMagnetization,}
\DoxyCodeLine{95             vectorPotential,}
\DoxyCodeLine{96             divergenceOfVectorPotential,}
\DoxyCodeLine{97             BField,}
\DoxyCodeLine{98             HField,}
\DoxyCodeLine{99             cauchyStress,}
\DoxyCodeLine{100             PK2Stress,}
\DoxyCodeLine{101             linearStress,}
\DoxyCodeLine{102             director}
\DoxyCodeLine{103       );}
\DoxyCodeLine{104 }
\DoxyCodeLine{105 \textcolor{comment}{// clang-\/format on}}
\DoxyCodeLine{106 }
\DoxyCodeLine{110 \textcolor{keyword}{struct }\mbox{\hyperlink{a01224}{AffordanceCollectionImpl}}}
\DoxyCodeLine{111 \{}
\DoxyCodeLine{112   \mbox{\hyperlink{a00302_ga8a33210894e12be4feb3d96fdfde215c}{ScalarAffordances}} \mbox{\hyperlink{a01224_a516061663dea71c22750abaf2175f6d5}{scalarAffordances}}\{\mbox{\hyperlink{a00302_gga8a33210894e12be4feb3d96fdfde215ca9a280b29988e2eac8c0767e0fcefb49c}{ScalarAffordances::noAffordance}}\};}
\DoxyCodeLine{113   \mbox{\hyperlink{a00302_ga122268ff4d2c0beee58799d85ba5e52a}{VectorAffordances}} \mbox{\hyperlink{a01224_a02e0fc97626b53e154bee9121582a69b}{vectorAffordances}}\{\mbox{\hyperlink{a00302_gga122268ff4d2c0beee58799d85ba5e52aa9a280b29988e2eac8c0767e0fcefb49c}{VectorAffordances::noAffordance}}\};}
\DoxyCodeLine{114   \mbox{\hyperlink{a00302_ga52cb89165daabb500f6e2eb68ddd76ee}{MatrixAffordances}} \mbox{\hyperlink{a01224_afe3707101cc945fda75d93821846399b}{matrixAffordances}}\{\mbox{\hyperlink{a00302_gga52cb89165daabb500f6e2eb68ddd76eea9a280b29988e2eac8c0767e0fcefb49c}{MatrixAffordances::noAffordance}}\};}
\DoxyCodeLine{115 \};}
\DoxyCodeLine{116 }
\DoxyCodeLine{120 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Type>}
\DoxyCodeLine{121 \textcolor{keyword}{concept }\mbox{\hyperlink{a01609}{FEAffordance}} = std::is\_same\_v<std::remove\_cvref\_t<Type>, \mbox{\hyperlink{a00302_ga8a33210894e12be4feb3d96fdfde215c}{ScalarAffordances}}> or}
\DoxyCodeLine{122                        std::is\_same\_v<std::remove\_cvref\_t<Type>, \mbox{\hyperlink{a00302_ga122268ff4d2c0beee58799d85ba5e52a}{VectorAffordances}}> or}
\DoxyCodeLine{123                        std::is\_same\_v<std::remove\_cvref\_t<Type>, \mbox{\hyperlink{a00302_ga52cb89165daabb500f6e2eb68ddd76ee}{MatrixAffordances}}> or}
\DoxyCodeLine{124                        std::is\_same\_v<std::remove\_cvref\_t<Type>, AffordanceCollectionImpl>;}
\DoxyCodeLine{125 }
\DoxyCodeLine{126 \textcolor{keyword}{inline} \textcolor{keyword}{constexpr} \mbox{\hyperlink{a00302_ga122268ff4d2c0beee58799d85ba5e52a}{VectorAffordances}} \mbox{\hyperlink{a00316_a8d0ca59930b7ae15351497bd14319d1d}{forces}} = \mbox{\hyperlink{a00302_gga122268ff4d2c0beee58799d85ba5e52aa2c05161a7e67e946ddc889571aac4e89}{VectorAffordances::forces}};}
\DoxyCodeLine{127 }
\DoxyCodeLine{128 \textcolor{keyword}{inline} \textcolor{keyword}{constexpr} \mbox{\hyperlink{a00302_ga52cb89165daabb500f6e2eb68ddd76ee}{MatrixAffordances}} \mbox{\hyperlink{a00316_a5185740b975fb7539a6e07553a061b26}{stiffness}}                   = \mbox{\hyperlink{a00302_gga52cb89165daabb500f6e2eb68ddd76eea086e8b527490b8abe606a8dd76586ab1}{MatrixAffordances::stiffness}};}
\DoxyCodeLine{129 \textcolor{keyword}{inline} \textcolor{keyword}{constexpr} \mbox{\hyperlink{a00302_ga52cb89165daabb500f6e2eb68ddd76ee}{MatrixAffordances}} \mbox{\hyperlink{a00316_a8191d0e317e1bea2a35d6c8a8f20750f}{stiffnessdiffBucklingVector}} = \mbox{\hyperlink{a00302_gga52cb89165daabb500f6e2eb68ddd76eeadaa7ff7d704732b763943e3355764532}{MatrixAffordances::stiffnessdiffBucklingVector}};}
\DoxyCodeLine{130 \textcolor{keyword}{inline} \textcolor{keyword}{constexpr} \mbox{\hyperlink{a00302_ga52cb89165daabb500f6e2eb68ddd76ee}{MatrixAffordances}} \mbox{\hyperlink{a00316_a7e05e861b25ca636c1ccba4b8d2a3831}{mass}}                        = \mbox{\hyperlink{a00302_gga52cb89165daabb500f6e2eb68ddd76eead90ccffa01275a7a7795fb6d1274e75f}{MatrixAffordances::mass}};}
\DoxyCodeLine{131 }
\DoxyCodeLine{132 \textcolor{keyword}{inline} \textcolor{keyword}{constexpr} \mbox{\hyperlink{a00302_ga8a33210894e12be4feb3d96fdfde215c}{ScalarAffordances}} \mbox{\hyperlink{a00316_a64dfa264a039267932c6c99eb66ae98e}{potentialEnergy}} = \mbox{\hyperlink{a00302_gga8a33210894e12be4feb3d96fdfde215ca814f34f472acef493e9ecf0ffccdcae6}{ScalarAffordances::mechanicalPotentialEnergy}};}
\DoxyCodeLine{133 }
\DoxyCodeLine{134 \textcolor{keyword}{namespace }AffordanceCollections \{}
\DoxyCodeLine{135   \textcolor{keyword}{inline} \textcolor{keyword}{constexpr} \mbox{\hyperlink{a01224}{AffordanceCollectionImpl}} \mbox{\hyperlink{a00320_a74c1342e9b6a556e6b1276b7fde137e1}{elastoStatics}} = \{\mbox{\hyperlink{a00302_gga8a33210894e12be4feb3d96fdfde215ca814f34f472acef493e9ecf0ffccdcae6}{ScalarAffordances::mechanicalPotentialEnergy}},}
\DoxyCodeLine{136                                                              \mbox{\hyperlink{a00302_gga122268ff4d2c0beee58799d85ba5e52aa2c05161a7e67e946ddc889571aac4e89}{VectorAffordances::forces}}, \mbox{\hyperlink{a00302_gga52cb89165daabb500f6e2eb68ddd76eea086e8b527490b8abe606a8dd76586ab1}{MatrixAffordances::stiffness}}\};}
\DoxyCodeLine{137 \}}
\DoxyCodeLine{138 }
\DoxyCodeLine{139 \textcolor{keyword}{namespace }Impl \{}
\DoxyCodeLine{140   \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{141   \textcolor{keyword}{struct }DeduceRawVectorType}
\DoxyCodeLine{142   \{}
\DoxyCodeLine{143     \textcolor{keyword}{static\_assert}(!std::is\_same<T, T>::value, \textcolor{stringliteral}{"{}You should end up in the provided specializations"{}});}
\DoxyCodeLine{144   \};}
\DoxyCodeLine{145 }
\DoxyCodeLine{146   \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{147   \textcolor{keyword}{struct }DeduceRawVectorType<std::reference\_wrapper<T>>}
\DoxyCodeLine{148   \{}
\DoxyCodeLine{149     \textcolor{keyword}{using }Type = T;}
\DoxyCodeLine{150   \};}
\DoxyCodeLine{151 }
\DoxyCodeLine{152   \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{153   \textcolor{keyword}{struct }DeduceRawVectorType<\mbox{\hyperlink{a00323}{Eigen}}::Ref<T>>}
\DoxyCodeLine{154   \{}
\DoxyCodeLine{155     \textcolor{keyword}{using }Type = Eigen::Ref<T>;}
\DoxyCodeLine{156   \};}
\DoxyCodeLine{157 \} \textcolor{comment}{// namespace Impl}}
\DoxyCodeLine{158 }
\DoxyCodeLine{171 \textcolor{keyword}{template} <\textcolor{keyword}{typename} SolutionVectorType\_ = std::reference\_wrapper<Eigen::VectorXd>,}
\DoxyCodeLine{172           \textcolor{keyword}{typename} ParameterType\_      = std::reference\_wrapper<\textcolor{keywordtype}{double}>>}
\DoxyCodeLine{173 \textcolor{keyword}{class }\mbox{\hyperlink{a01240}{FERequirements}}}
\DoxyCodeLine{174 \{}
\DoxyCodeLine{175 \textcolor{keyword}{public}:}
\DoxyCodeLine{176   \textcolor{keyword}{using }\mbox{\hyperlink{a01240_af1af058f84d982946aa834c9dd29f504}{SolutionVectorType}}    = SolutionVectorType\_;}
\DoxyCodeLine{177   \textcolor{keyword}{using }\mbox{\hyperlink{a01240_a0911acef8d62b37965de7a0ead42c85b}{SolutionVectorTypeRaw}} = \textcolor{keyword}{typename} Impl::DeduceRawVectorType<std::remove\_cvref\_t<SolutionVectorType\_>>::Type;}
\DoxyCodeLine{178   \textcolor{keyword}{using }\mbox{\hyperlink{a01240_a9da906516e03b5d6db852aaabec0f458}{ParameterType}}         = ParameterType\_;}
\DoxyCodeLine{179   \textcolor{keyword}{using }\mbox{\hyperlink{a01240_ad5d5b9eab0760b9d8be25e6ee75200f8}{ParameterTypeRaw}}      = \textcolor{keyword}{typename} ParameterType\_::type;}
\DoxyCodeLine{180 }
\DoxyCodeLine{190   \textcolor{keyword}{template} <FEAffordance Affordance>}
\DoxyCodeLine{191   \mbox{\hyperlink{a01240}{FERequirements}}\& \mbox{\hyperlink{a01240_a1e23968b6a7d57454626054bd42dfea0}{addAffordance}}(Affordance\&\& affordance) \{}
\DoxyCodeLine{192     \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (std::is\_same\_v<Affordance, ScalarAffordances>)}
\DoxyCodeLine{193       affordances.\mbox{\hyperlink{a01224_a516061663dea71c22750abaf2175f6d5}{scalarAffordances}} = affordance;}
\DoxyCodeLine{194     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} constexpr (std::is\_same\_v<Affordance, VectorAffordances>)}
\DoxyCodeLine{195       affordances.\mbox{\hyperlink{a01224_a02e0fc97626b53e154bee9121582a69b}{vectorAffordances}} = affordance;}
\DoxyCodeLine{196     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (std::is\_same\_v<Affordance, MatrixAffordances>)}
\DoxyCodeLine{197       affordances.\mbox{\hyperlink{a01224_afe3707101cc945fda75d93821846399b}{matrixAffordances}} = affordance;}
\DoxyCodeLine{198     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} constexpr (std::is\_same\_v<Affordance, AffordanceCollectionImpl>)}
\DoxyCodeLine{199       affordances = affordance;}
\DoxyCodeLine{200     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{201   \}}
\DoxyCodeLine{202 }
\DoxyCodeLine{212   \mbox{\hyperlink{a01240}{FERequirements}}\& \mbox{\hyperlink{a01240_a2aab5fe2d897e6af030d488832fc0eb2}{insertParameter}}(\textcolor{keyword}{const} \mbox{\hyperlink{a00303_ga0c1577fd05efee8475b0f7fef795bbbe}{FEParameter}}\& key, \mbox{\hyperlink{a01240_ad5d5b9eab0760b9d8be25e6ee75200f8}{ParameterTypeRaw}}\& val) \{}
\DoxyCodeLine{213     parameter.insert\_or\_assign(key, val);}
\DoxyCodeLine{214     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{215   \}}
\DoxyCodeLine{216 }
\DoxyCodeLine{226   \mbox{\hyperlink{a01240}{FERequirements}}\& \mbox{\hyperlink{a01240_a37df4d17ff9e92b448b0c4d89aadc87b}{insertGlobalSolution}}(\textcolor{keyword}{const} \mbox{\hyperlink{a00303_gaea763c94a1cecbeefc4f8661debcc5a3}{FESolutions}}\& key, \mbox{\hyperlink{a01240_a0911acef8d62b37965de7a0ead42c85b}{SolutionVectorTypeRaw}}\& sol) \{}
\DoxyCodeLine{227     sols.insert\_or\_assign(key, sol);}
\DoxyCodeLine{228     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{229   \}}
\DoxyCodeLine{230 }
\DoxyCodeLine{241   \textcolor{keyword}{const} \mbox{\hyperlink{a01240_a0911acef8d62b37965de7a0ead42c85b}{SolutionVectorTypeRaw}}\& \mbox{\hyperlink{a01240_ae7fc156ad6fff17f82c3ebefb188949e}{getGlobalSolution}}(\textcolor{keyword}{const} \mbox{\hyperlink{a00303_gaea763c94a1cecbeefc4f8661debcc5a3}{FESolutions}}\& key)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{242     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{243       \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (std::is\_same\_v<SolutionVectorType, std::reference\_wrapper<Eigen::VectorXd>>)}
\DoxyCodeLine{244         \textcolor{keywordflow}{return} sols.at(key).get();}
\DoxyCodeLine{245       \textcolor{keywordflow}{else}}
\DoxyCodeLine{246         \textcolor{keywordflow}{return} sols.at(key);}
\DoxyCodeLine{247     \} \textcolor{keywordflow}{catch} (std::out\_of\_range\& oor) \{}
\DoxyCodeLine{248       DUNE\_THROW(Dune::RangeError, std::string(\textcolor{stringliteral}{"{}Out of Range error: "{}}) + std::string(oor.what()) +}
\DoxyCodeLine{249                                        \textcolor{stringliteral}{"{} in getGlobalSolution with key"{}} + \mbox{\hyperlink{a00316_a0853622412d4cedc078b81ba454eb250}{toString}}(key));}
\DoxyCodeLine{250       abort();}
\DoxyCodeLine{251     \}}
\DoxyCodeLine{252   \}}
\DoxyCodeLine{253 }
\DoxyCodeLine{264   \textcolor{keyword}{const} \mbox{\hyperlink{a01240_ad5d5b9eab0760b9d8be25e6ee75200f8}{ParameterTypeRaw}}\& \mbox{\hyperlink{a01240_aed233407eb8ab5e7c7d7c8ea35265328}{getParameter}}(\mbox{\hyperlink{a00303_ga0c1577fd05efee8475b0f7fef795bbbe}{FEParameter}}\&\& key)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{265     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{266       \textcolor{keywordflow}{return} parameter.at(key).get();}
\DoxyCodeLine{267     \} \textcolor{keywordflow}{catch} (std::out\_of\_range\& oor) \{}
\DoxyCodeLine{268       DUNE\_THROW(Dune::RangeError, std::string(\textcolor{stringliteral}{"{}Out of Range error: "{}}) + std::string(oor.what()) +}
\DoxyCodeLine{269                                        \textcolor{stringliteral}{"{} in getParameter with key"{}} + \mbox{\hyperlink{a00316_a0853622412d4cedc078b81ba454eb250}{toString}}(key));}
\DoxyCodeLine{270       abort();}
\DoxyCodeLine{271     \}}
\DoxyCodeLine{272   \}}
\DoxyCodeLine{273 }
\DoxyCodeLine{283   \textcolor{keyword}{template} <FEAffordance Affordance>}
\DoxyCodeLine{284   \textcolor{keywordtype}{bool} \mbox{\hyperlink{a01240_a1f2ddb05542926dd20a8e5bfc652479c}{hasAffordance}}(Affordance\&\& affordance)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{285     \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (std::is\_same\_v<Affordance, ScalarAffordances>)}
\DoxyCodeLine{286       \textcolor{keywordflow}{return} affordances.\mbox{\hyperlink{a01224_a516061663dea71c22750abaf2175f6d5}{scalarAffordances}} == affordance;}
\DoxyCodeLine{287     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} constexpr (std::is\_same\_v<Affordance, VectorAffordances>)}
\DoxyCodeLine{288       \textcolor{keywordflow}{return} affordances.\mbox{\hyperlink{a01224_a02e0fc97626b53e154bee9121582a69b}{vectorAffordances}} == affordance;}
\DoxyCodeLine{289     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (std::is\_same\_v<Affordance, MatrixAffordances>)}
\DoxyCodeLine{290       \textcolor{keywordflow}{return} affordances.\mbox{\hyperlink{a01224_afe3707101cc945fda75d93821846399b}{matrixAffordances}} == affordance;}
\DoxyCodeLine{291     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} constexpr (std::is\_same\_v<Affordance, AffordanceCollectionImpl>)}
\DoxyCodeLine{292       \textcolor{keywordflow}{return} affordances == affordance;}
\DoxyCodeLine{293   \}}
\DoxyCodeLine{294 }
\DoxyCodeLine{295 \textcolor{keyword}{private}:}
\DoxyCodeLine{296   std::map<FESolutions, SolutionVectorType> sols;}
\DoxyCodeLine{297   std::map<FEParameter, ParameterType> parameter;}
\DoxyCodeLine{298   \mbox{\hyperlink{a01224}{AffordanceCollectionImpl}} affordances;}
\DoxyCodeLine{299 \};}
\DoxyCodeLine{300 }
\DoxyCodeLine{314 \textcolor{keyword}{template} <\textcolor{keyword}{typename} SolutionVectorType\_ = std::reference\_wrapper<Eigen::VectorXd>,}
\DoxyCodeLine{315           \textcolor{keyword}{typename} ParameterType\_      = std::reference\_wrapper<\textcolor{keywordtype}{double}>>}
\DoxyCodeLine{316 \textcolor{keyword}{class }[[deprecated(}
\DoxyCodeLine{317     "{}\mbox{\hyperlink{a01244}{FErequirements}} is deprecaded and will be removed after v0.5. Use \mbox{\hyperlink{a01240}{FERequirements}} instead."{})]] \mbox{\hyperlink{a01244}{FErequirements}}}
\DoxyCodeLine{318     : \textcolor{keyword}{public} \mbox{\hyperlink{a01240}{FERequirements}}<SolutionVectorType\_, ParameterType\_>}
\DoxyCodeLine{319 \{}
\DoxyCodeLine{320   \textcolor{keyword}{using }\mbox{\hyperlink{a01240}{Base}} = \mbox{\hyperlink{a01240}{FERequirements<SolutionVectorType\_, ParameterType\_>}};}
\DoxyCodeLine{321 }
\DoxyCodeLine{322 \textcolor{keyword}{public}:}
\DoxyCodeLine{323   \mbox{\hyperlink{a01244_a82afd35371823de34db162e31ea8102b}{FErequirements}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{324   \mbox{\hyperlink{a01244_a35fe6544c072e98f65f36ab8e3f16738}{FErequirements}}(\mbox{\hyperlink{a01240}{Base}}\&\& base)}
\DoxyCodeLine{325       : \mbox{\hyperlink{a01240}{Base}}(std::forward<\mbox{\hyperlink{a01240}{Base}}>(base)) \{\}}
\DoxyCodeLine{326   \mbox{\hyperlink{a01244_af6dc438f49b7ff19613329217bb86df4}{FErequirements}}(\textcolor{keyword}{const} \mbox{\hyperlink{a01240}{Base}}\& base)}
\DoxyCodeLine{327       : \mbox{\hyperlink{a01240}{Base}}(base) \{\}}
\DoxyCodeLine{328   \mbox{\hyperlink{a01244}{FErequirements}}\& \mbox{\hyperlink{a01244_a985a97bcb9fc27876df7cfab27e791ad}{operator=}}(\textcolor{keyword}{const} \mbox{\hyperlink{a01240}{Base}}\& base) \{}
\DoxyCodeLine{329     Base::operator=(base);}
\DoxyCodeLine{330     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{331   \}}
\DoxyCodeLine{332   \mbox{\hyperlink{a01244}{FErequirements}}\& \mbox{\hyperlink{a01244_a3112db3d77a5487d6ea3e48598b64a44}{operator=}}(\mbox{\hyperlink{a01240}{Base}}\&\& base) \{}
\DoxyCodeLine{333     Base::operator=(std::forward<Base>(base));}
\DoxyCodeLine{334     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{335   \}}
\DoxyCodeLine{336 \};}
\DoxyCodeLine{337 }
\DoxyCodeLine{348 \textcolor{keyword}{template} <\textcolor{keyword}{typename} ParameterType = \textcolor{keywordtype}{double}>}
\DoxyCodeLine{349 \textcolor{keyword}{class }\mbox{\hyperlink{a01248}{ResultTypeMap}}}
\DoxyCodeLine{350 \{}
\DoxyCodeLine{351 \textcolor{keyword}{public}:}
\DoxyCodeLine{352   \textcolor{keyword}{using }\mbox{\hyperlink{a01248_a72132ad19ec7049750ba2c4f60cde93f}{ResultArray}} = Eigen::Matrix<ParameterType, Eigen::Dynamic, Eigen::Dynamic, 0, 9, 3>;}
\DoxyCodeLine{353 }
\DoxyCodeLine{362   \textcolor{keywordtype}{void} \mbox{\hyperlink{a01248_aa399a96000daf40950e388eb0b23a7c0}{insertOrAssignResult}}(\mbox{\hyperlink{a00303_ga531be167e924b749eb8b4ccc7f1c18c9}{ResultType}}\&\& resultType, \textcolor{keyword}{const} \mbox{\hyperlink{a01248_a72132ad19ec7049750ba2c4f60cde93f}{ResultArray}}\& resultArray) \{}
\DoxyCodeLine{363     results.insert\_or\_assign(resultType, resultArray);}
\DoxyCodeLine{364   \}}
\DoxyCodeLine{365 }
\DoxyCodeLine{376   \mbox{\hyperlink{a01248_a72132ad19ec7049750ba2c4f60cde93f}{ResultArray}}\& \mbox{\hyperlink{a01248_a7f9a61700e42a5507d7dfcfd059a4067}{getResult}}(\textcolor{keyword}{const} \mbox{\hyperlink{a00303_ga531be167e924b749eb8b4ccc7f1c18c9}{ResultType}}\& resultType) \{ \textcolor{keywordflow}{return} results.at(resultType); \}}
\DoxyCodeLine{377 }
\DoxyCodeLine{387   \textcolor{keyword}{auto}\& \mbox{\hyperlink{a01248_a6c2c52fc90ff0af02def08b0c8f5deb2}{getSingleResult}}() \{}
\DoxyCodeLine{388     \textcolor{keywordflow}{if} (results.size() != 1)}
\DoxyCodeLine{389       DUNE\_THROW(Dune::RangeError, \textcolor{stringliteral}{"{}getSingleResult can only be called when a single result was inserted"{}});}
\DoxyCodeLine{390     \textcolor{keywordflow}{else}}
\DoxyCodeLine{391       \textcolor{keywordflow}{return} *(results.begin());}
\DoxyCodeLine{392   \}}
\DoxyCodeLine{393 }
\DoxyCodeLine{394 \textcolor{keyword}{private}:}
\DoxyCodeLine{395   std::map<ResultType, ResultArray> results;}
\DoxyCodeLine{396 \};}
\DoxyCodeLine{397 }
\DoxyCodeLine{398 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Type>}
\DoxyCodeLine{399 \textcolor{keyword}{concept }\mbox{\hyperlink{a01610}{ResultTypeConcept}} = std::is\_same\_v<Type, ResultType>;}
\DoxyCodeLine{400 }
\DoxyCodeLine{412 \textcolor{keyword}{template} <\textcolor{keyword}{typename} FERequirements = FERequirements<>>}
\DoxyCodeLine{413 \textcolor{keyword}{class }\mbox{\hyperlink{a01252}{ResultRequirements}}}
\DoxyCodeLine{414 \{}
\DoxyCodeLine{415 \textcolor{keyword}{public}:}
\DoxyCodeLine{416   \textcolor{keyword}{using }\mbox{\hyperlink{a01252_acf475b20f169aa0c5d35067cac32f0c2}{ParameterTypeRaw}}      = \textcolor{keyword}{typename} \mbox{\hyperlink{a01240_ad5d5b9eab0760b9d8be25e6ee75200f8}{FERequirements::ParameterTypeRaw}};}
\DoxyCodeLine{417   \textcolor{keyword}{using }\mbox{\hyperlink{a01252_a6572e4b55efcac594536459775487a28}{SolutionVectorType}}    = \textcolor{keyword}{typename} \mbox{\hyperlink{a01240_af1af058f84d982946aa834c9dd29f504}{FERequirements::SolutionVectorType}};}
\DoxyCodeLine{418   \textcolor{keyword}{using }\mbox{\hyperlink{a01252_a9c76a8f7f9a65f0663ea09d444e4843b}{SolutionVectorTypeRaw}} = \textcolor{keyword}{typename} \mbox{\hyperlink{a01240_a0911acef8d62b37965de7a0ead42c85b}{FERequirements::SolutionVectorTypeRaw}};}
\DoxyCodeLine{419 }
\DoxyCodeLine{428   \mbox{\hyperlink{a01252_ae9f5aa3ebb36cf7bb2d647d984354075}{ResultRequirements}}(\mbox{\hyperlink{a01240}{FERequirements}}\&\& req, std::set<ResultType>\&\& p\_resType)}
\DoxyCodeLine{429       : reqB\{req\},}
\DoxyCodeLine{430         resType(std::move(p\_resType)) \{\}}
\DoxyCodeLine{431 }
\DoxyCodeLine{439   \textcolor{keyword}{explicit} \mbox{\hyperlink{a01252_acc8b5392590e2ea3ebd73f3cb920f2cd}{ResultRequirements}}(\textcolor{keyword}{const} \mbox{\hyperlink{a01240}{FERequirements}}\& req)}
\DoxyCodeLine{440       : reqB\{req\} \{\}}
\DoxyCodeLine{441 }
\DoxyCodeLine{447   \mbox{\hyperlink{a01252_a7209c38b9e0f6f251a00b582859d852b}{ResultRequirements}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{448 }
\DoxyCodeLine{457   \textcolor{keywordtype}{bool} \mbox{\hyperlink{a01252_aa75a1bfbcca39d7c30d1b1141eae4795}{isResultRequested}}(\mbox{\hyperlink{a00303_ga531be167e924b749eb8b4ccc7f1c18c9}{ResultType}}\&\& key)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} resType.contains(key); \}}
\DoxyCodeLine{458 }
\DoxyCodeLine{468   \textcolor{keyword}{template} <FEAffordance Affordance>}
\DoxyCodeLine{469   \mbox{\hyperlink{a01252}{ResultRequirements}}\& \mbox{\hyperlink{a01252_a0900b42cbc6485aad82c55179234b087}{addAffordance}}(Affordance\&\& affordance) \{}
\DoxyCodeLine{470     reqB.\mbox{\hyperlink{a01240_a1e23968b6a7d57454626054bd42dfea0}{addAffordance}}(std::forward<Affordance>(affordance));}
\DoxyCodeLine{471     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{472   \}}
\DoxyCodeLine{473 }
\DoxyCodeLine{483   \mbox{\hyperlink{a01252}{ResultRequirements}}\& \mbox{\hyperlink{a01252_a3ee8e39fcf1acce22dc1b5c36c70a1fd}{insertParameter}}(\mbox{\hyperlink{a00303_ga0c1577fd05efee8475b0f7fef795bbbe}{FEParameter}}\&\& key, \mbox{\hyperlink{a01252_acf475b20f169aa0c5d35067cac32f0c2}{ParameterTypeRaw}}\& val) \{}
\DoxyCodeLine{484     reqB.\mbox{\hyperlink{a01240_a2aab5fe2d897e6af030d488832fc0eb2}{insertParameter}}(std::forward<FEParameter>(key), val);}
\DoxyCodeLine{485     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{486   \}}
\DoxyCodeLine{487 }
\DoxyCodeLine{497   \mbox{\hyperlink{a01252}{ResultRequirements}}\& \mbox{\hyperlink{a01252_a98129560488126934c2937dc3954a74d}{insertGlobalSolution}}(\mbox{\hyperlink{a00303_gaea763c94a1cecbeefc4f8661debcc5a3}{FESolutions}}\&\& key, \mbox{\hyperlink{a01252_a9c76a8f7f9a65f0663ea09d444e4843b}{SolutionVectorTypeRaw}}\& sol) \{}
\DoxyCodeLine{498     reqB.\mbox{\hyperlink{a01240_a37df4d17ff9e92b448b0c4d89aadc87b}{insertGlobalSolution}}(std::forward<FESolutions>(key), sol);}
\DoxyCodeLine{499     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{500   \}}
\DoxyCodeLine{501 }
\DoxyCodeLine{511   \textcolor{keyword}{template} <\mbox{\hyperlink{a01610}{ResultTypeConcept}}... ResultTypes>}
\DoxyCodeLine{512   \mbox{\hyperlink{a01252}{ResultRequirements}}\& \mbox{\hyperlink{a01252_a18e3aaa93d9106e11d846c7378f1e849}{addResultRequest}}(ResultTypes\&\&... keys) \{}
\DoxyCodeLine{513     resType.insert(\{std::move(keys)...\});}
\DoxyCodeLine{514     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{515   \}}
\DoxyCodeLine{516 }
\DoxyCodeLine{525   \textcolor{keyword}{const} \mbox{\hyperlink{a01252_a9c76a8f7f9a65f0663ea09d444e4843b}{SolutionVectorTypeRaw}}\& \mbox{\hyperlink{a01252_a15c5fab8c1190b52ff013c244fdfa486}{getGlobalSolution}}(\mbox{\hyperlink{a00303_gaea763c94a1cecbeefc4f8661debcc5a3}{FESolutions}}\&\& key)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{526     \textcolor{keywordflow}{return} reqB.\mbox{\hyperlink{a01240_ae7fc156ad6fff17f82c3ebefb188949e}{getGlobalSolution}}(std::move(key));}
\DoxyCodeLine{527   \}}
\DoxyCodeLine{528 }
\DoxyCodeLine{537   \textcolor{keyword}{const} \mbox{\hyperlink{a01252_acf475b20f169aa0c5d35067cac32f0c2}{ParameterTypeRaw}}\& \mbox{\hyperlink{a01252_aa548e0d7e6823134a51d91d5ec47c37f}{getParameter}}(\mbox{\hyperlink{a00303_ga0c1577fd05efee8475b0f7fef795bbbe}{FEParameter}}\&\& key)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} reqB.\mbox{\hyperlink{a01240_aed233407eb8ab5e7c7d7c8ea35265328}{getParameter}}(std::move(key)); \}}
\DoxyCodeLine{538 }
\DoxyCodeLine{546   \textcolor{keyword}{const} \mbox{\hyperlink{a01240}{FERequirements}}\& \mbox{\hyperlink{a01252_a55da3509459a63cd2ffcb20df9039d0d}{getFERequirements}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} reqB; \}}
\DoxyCodeLine{547 }
\DoxyCodeLine{557   \textcolor{keyword}{auto} \mbox{\hyperlink{a01252_a244a5a171cdb08dbed0797d5c0669b85}{getRequestedResult}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{558     \textcolor{keywordflow}{if} (resType.size() == 1)}
\DoxyCodeLine{559       \textcolor{keywordflow}{return} *(resType.begin());}
\DoxyCodeLine{560     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{561       DUNE\_THROW(Dune::InvalidStateException, \textcolor{stringliteral}{"{}This function can only be called when a single result is requested"{}});}
\DoxyCodeLine{562     \}}
\DoxyCodeLine{563   \}}
\DoxyCodeLine{564 }
\DoxyCodeLine{565 \textcolor{keyword}{private}:}
\DoxyCodeLine{566   std::set<ResultType> resType;}
\DoxyCodeLine{567   \mbox{\hyperlink{a01240}{FERequirements}} reqB;}
\DoxyCodeLine{568 \};}
\DoxyCodeLine{569 \} \textcolor{comment}{// namespace Ikarus}}

\end{DoxyCode}

\hypertarget{a00191_source}{}\doxysection{truss.\+hh}
\label{a00191_source}\index{truss.hh@{truss.hh}}
\mbox{\hyperlink{a00191}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// SPDX-\/FileCopyrightText: 2021-\/2024 The Ikarus Developers mueller@ibb.uni-\/stuttgart.de}}
\DoxyCodeLine{2 \textcolor{comment}{// SPDX-\/License-\/Identifier: LGPL-\/3.0-\/or-\/later}}
\DoxyCodeLine{3 }
\DoxyCodeLine{10 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{11 }
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <optional>}}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <dune/localfefunctions/eigenDuneTransformations.hh>}}
\DoxyCodeLine{15 }
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{a00125}{ikarus/finiteelements/fehelper.hh}}>}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{a00128}{ikarus/finiteelements/ferequirements.hh}}>}}
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{keyword}{namespace }\mbox{\hyperlink{a00363}{Ikarus}} \{}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{keyword}{template} <\textcolor{keyword}{typename} PreFE, \textcolor{keyword}{typename} FE>}
\DoxyCodeLine{22 \textcolor{keyword}{class }Truss;}
\DoxyCodeLine{23 }
\DoxyCodeLine{27 \textcolor{keyword}{struct }\mbox{\hyperlink{a01496}{TrussPre}}}
\DoxyCodeLine{28 \{}
\DoxyCodeLine{29   \textcolor{keywordtype}{double} \mbox{\hyperlink{a01496_ac9e7517a9be64fd9c743c1c11dfd30f9}{E}}; \textcolor{comment}{// Young's modulus}}
\DoxyCodeLine{30   \textcolor{keywordtype}{double} \mbox{\hyperlink{a01496_adebed226744a01c44269cadd0bf9998f}{A}}; \textcolor{comment}{// Cross-\/section area}}
\DoxyCodeLine{31 }
\DoxyCodeLine{32   \textcolor{keyword}{template} <\textcolor{keyword}{typename} PreFE, \textcolor{keyword}{typename} FE>}
\DoxyCodeLine{33   \textcolor{keyword}{using }\mbox{\hyperlink{a01492}{Skill}} = \mbox{\hyperlink{a01492}{Truss<PreFE, FE>}};}
\DoxyCodeLine{34 \};}
\DoxyCodeLine{35 }
\DoxyCodeLine{44 \textcolor{keyword}{template} <\textcolor{keyword}{typename} PreFE, \textcolor{keyword}{typename} FE>}
\DoxyCodeLine{45 \textcolor{keyword}{class }\mbox{\hyperlink{a01492}{Truss}}}
\DoxyCodeLine{46 \{}
\DoxyCodeLine{47 \textcolor{keyword}{public}:}
\DoxyCodeLine{48   \textcolor{keyword}{using }\mbox{\hyperlink{a01372}{Traits}}       = \mbox{\hyperlink{a01316_a826c356a5afb013faffb5f7ac893cff4}{PreFE::Traits}};}
\DoxyCodeLine{49   \textcolor{keyword}{using }\mbox{\hyperlink{a01492_aa1f84ce75ed79a35a1f3daa0d7ecbb18}{BasisHandler}} = \textcolor{keyword}{typename} \mbox{\hyperlink{a01372_a129085c175bca28f94c71699b734ba04}{Traits::BasisHandler}};}
\DoxyCodeLine{50   \textcolor{keyword}{using }\mbox{\hyperlink{a01492_a6417a09910a66224d26c7436b478c0bb}{FlatBasis}}    = \textcolor{keyword}{typename} \mbox{\hyperlink{a01372_a81feef959fedef62b2e1daabbd52b5f2}{Traits::FlatBasis}};}
\DoxyCodeLine{51   \textcolor{keyword}{using }\mbox{\hyperlink{a01344}{Requirement}} =}
\DoxyCodeLine{52       \mbox{\hyperlink{a01344}{FERequirementsFactory<FESolutions::displacement, FEParameter::loadfactor, Traits::useEigenRef>::type}};}
\DoxyCodeLine{53   \textcolor{keyword}{using }\mbox{\hyperlink{a01492_a2fe6312a266dde582b526f80bab5513e}{LocalView}} = \textcolor{keyword}{typename} \mbox{\hyperlink{a01372_a06bdad066f621e46875af45a22677a3c}{Traits::LocalView}};}
\DoxyCodeLine{54   \textcolor{keyword}{using }\mbox{\hyperlink{a01492_a612cd26d67f7be9923188c46bfedeba3}{Geometry}}  = \textcolor{keyword}{typename} \mbox{\hyperlink{a01372_a0b7be1104fba2d190e3fed46f291a851}{Traits::Geometry}};}
\DoxyCodeLine{55   \textcolor{keyword}{using }\mbox{\hyperlink{a01492_a703d7e18265f53bf4e24390a3123f24c}{GridView}}  = \textcolor{keyword}{typename} \mbox{\hyperlink{a01372_a3ec0294824df467074f5070cb58f5a91}{Traits::GridView}};}
\DoxyCodeLine{56   \textcolor{keyword}{using }\mbox{\hyperlink{a01492_ad953dbda6b497d1e6fe27405d2d74edd}{Element}}   = \textcolor{keyword}{typename} \mbox{\hyperlink{a01372_ac4668b9c9142defdf3b70cca8eeb30c4}{Traits::Element}};}
\DoxyCodeLine{57   \textcolor{keyword}{using }\mbox{\hyperlink{a01496}{Pre}}       = \mbox{\hyperlink{a01496}{TrussPre}};}
\DoxyCodeLine{58 }
\DoxyCodeLine{59   \textcolor{keyword}{static} \textcolor{keyword}{constexpr} \textcolor{keywordtype}{int} \mbox{\hyperlink{a01492_ad0e7e96505e71d75eb2f64b079169acb}{myDim}}    = \mbox{\hyperlink{a01372_ae15b8efa9f66a3caee81d99dd5c648de}{Traits::mydim}};}
\DoxyCodeLine{60   \textcolor{keyword}{static} \textcolor{keyword}{constexpr} \textcolor{keywordtype}{int} \mbox{\hyperlink{a01492_a41e2a568f1739778e2277d5eec69cfce}{worldDim}} = \mbox{\hyperlink{a01372_a5d611e1d48285bac5c5ebd6fda9c7cc7}{Traits::worlddim}};}
\DoxyCodeLine{61   \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{a01492_ad0e7e96505e71d75eb2f64b079169acb}{myDim}} == 1, \textcolor{stringliteral}{"{}Truss elements should have myDim == 1"{}});}
\DoxyCodeLine{62 }
\DoxyCodeLine{71   \textcolor{keyword}{template} <\textcolor{keyword}{typename} ST>}
\DoxyCodeLine{72   \textcolor{keyword}{struct }\mbox{\hyperlink{a01500}{KinematicVariables}}}
\DoxyCodeLine{73   \{}
\DoxyCodeLine{74     \textcolor{keywordtype}{double} \mbox{\hyperlink{a01500_a05681746b98b7ea4259896cbd87727b5}{L}};                  }
\DoxyCodeLine{75     ST \mbox{\hyperlink{a01500_a507fe4fbad5adfb4df5f70e690987f27}{l}};                      }
\DoxyCodeLine{76     ST \mbox{\hyperlink{a01500_a947ad2c350846f2abb6f94aff9106db7}{Elin}};                   }
\DoxyCodeLine{77     ST \mbox{\hyperlink{a01500_a7d0090ec5c0de738cb936cf8b69d0985}{Egl}};                    }
\DoxyCodeLine{78     Eigen::VectorX<ST> \mbox{\hyperlink{a01500_adad74786f3a49a82a7cd239aa3065bb0}{dEdu}};   }
\DoxyCodeLine{79     Eigen::MatrixX<ST> \mbox{\hyperlink{a01500_a0647f4c61cc8ee370d1b3b795a48c8e6}{ddEddu}}; }
\DoxyCodeLine{80   \};}
\DoxyCodeLine{81 }
\DoxyCodeLine{86   \textcolor{keyword}{explicit} \mbox{\hyperlink{a01492_a31c3128e6407c9b869b6eb4a3436aae6}{Truss}}(\textcolor{keyword}{const} \mbox{\hyperlink{a01496}{Pre}}\& pre)}
\DoxyCodeLine{87       : E\{pre.E\},}
\DoxyCodeLine{88         A\{pre.A\} \{\}}
\DoxyCodeLine{89 }
\DoxyCodeLine{98   \textcolor{keyword}{template} <\textcolor{keyword}{typename} ST = \textcolor{keywordtype}{double}>}
\DoxyCodeLine{99   \textcolor{keyword}{auto} \mbox{\hyperlink{a01492_af6a1883a353d39ea3aee75c1b5b59514}{displacement}}(\textcolor{keyword}{const} \mbox{\hyperlink{a01344}{Requirement}}\& par,}
\DoxyCodeLine{100                     \textcolor{keyword}{const} std::optional<std::reference\_wrapper<\textcolor{keyword}{const} Eigen::VectorX<ST>>>\& dx = std::nullopt)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{101     \textcolor{keyword}{const} \textcolor{keyword}{auto}\& d = par.\mbox{\hyperlink{a01344_a523ed390dfea00379b5b638e523ddb74}{globalSolution}}();}
\DoxyCodeLine{102     \textcolor{keyword}{auto} disp     = Ikarus::FEHelper::localSolutionBlockVector<Traits>(d, underlying().localView(), dx);}
\DoxyCodeLine{103     \textcolor{keywordflow}{return} disp;}
\DoxyCodeLine{104   \}}
\DoxyCodeLine{105 }
\DoxyCodeLine{115   \textcolor{keyword}{template} <\textcolor{keyword}{class} ST = \textcolor{keywordtype}{double}>}
\DoxyCodeLine{116   \mbox{\hyperlink{a01500}{KinematicVariables<ST>}} \mbox{\hyperlink{a01492_aeab583c651a9704392133a98e58e6ad4}{computeStrain}}(}
\DoxyCodeLine{117       \textcolor{keyword}{const} \mbox{\hyperlink{a01344}{Requirement}}\& par,}
\DoxyCodeLine{118       \textcolor{keyword}{const} std::optional<std::reference\_wrapper<\textcolor{keyword}{const} Eigen::VectorX<ST>>>\& dx = std::nullopt)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{119     \mbox{\hyperlink{a01500}{KinematicVariables<ST>}} kin;}
\DoxyCodeLine{120     \textcolor{keyword}{const} \textcolor{keyword}{auto}\& localView    = underlying().localView();}
\DoxyCodeLine{121     \textcolor{keyword}{const} \textcolor{keyword}{auto}\& tree         = localView.tree();}
\DoxyCodeLine{122     \textcolor{keyword}{const} \textcolor{keyword}{auto} numberOfNodes = tree.child(0).finiteElement().size();}
\DoxyCodeLine{123     \textcolor{keyword}{auto}\& ele                = localView.element();}
\DoxyCodeLine{124     \textcolor{keyword}{const} \textcolor{keyword}{auto} X1            = Dune::toEigen(ele.geometry().corner(0));}
\DoxyCodeLine{125     \textcolor{keyword}{const} \textcolor{keyword}{auto} X2            = Dune::toEigen(ele.geometry().corner(1));}
\DoxyCodeLine{126     \textcolor{keyword}{const} \textcolor{keyword}{auto} u             = \mbox{\hyperlink{a00358_gaf9d7cf401f9f03ce1aae728c646ce178}{Dune::viewAsEigenMatrixAsDynFixed}}(\mbox{\hyperlink{a01492_af6a1883a353d39ea3aee75c1b5b59514}{displacement}}(par, dx)).transpose().eval();}
\DoxyCodeLine{127     \textcolor{keyword}{const} \textcolor{keyword}{auto} A1            = X2 -\/ X1;}
\DoxyCodeLine{128     \textcolor{keyword}{const} \textcolor{keyword}{auto} ud1           = u.col(1) -\/ u.col(0);}
\DoxyCodeLine{129 }
\DoxyCodeLine{130     \textcolor{keyword}{const} Eigen::Vector<ST, worldDim> x1 = X1 + u.col(0);}
\DoxyCodeLine{131     \textcolor{keyword}{const} Eigen::Vector<ST, worldDim> x2 = X2 + u.col(1);}
\DoxyCodeLine{132 }
\DoxyCodeLine{133     \textcolor{keyword}{const} \textcolor{keywordtype}{double} Lsquared = A1.squaredNorm();}
\DoxyCodeLine{134     \textcolor{keyword}{const} ST lsquared     = (x2 -\/ x1).squaredNorm();}
\DoxyCodeLine{135 }
\DoxyCodeLine{136     kin.\mbox{\hyperlink{a01500_a05681746b98b7ea4259896cbd87727b5}{L}} = sqrt(Lsquared);}
\DoxyCodeLine{137     kin.\mbox{\hyperlink{a01500_a507fe4fbad5adfb4df5f70e690987f27}{l}} = sqrt(lsquared);}
\DoxyCodeLine{138 }
\DoxyCodeLine{139     \textcolor{comment}{// Linear strain}}
\DoxyCodeLine{140     kin.\mbox{\hyperlink{a01500_a947ad2c350846f2abb6f94aff9106db7}{Elin}} = (kin.\mbox{\hyperlink{a01500_a507fe4fbad5adfb4df5f70e690987f27}{l}} -\/ kin.\mbox{\hyperlink{a01500_a05681746b98b7ea4259896cbd87727b5}{L}}) / kin.\mbox{\hyperlink{a01500_a05681746b98b7ea4259896cbd87727b5}{L}};}
\DoxyCodeLine{141 }
\DoxyCodeLine{142     \textcolor{comment}{// Green-\/Lagrange strains}}
\DoxyCodeLine{143     kin.\mbox{\hyperlink{a01500_a7d0090ec5c0de738cb936cf8b69d0985}{Egl}} = 0.5 * (lsquared -\/ Lsquared) / Lsquared;}
\DoxyCodeLine{144 }
\DoxyCodeLine{145     \textcolor{comment}{// First derivative of Egl w.r.t displacements}}
\DoxyCodeLine{146     kin.\mbox{\hyperlink{a01500_adad74786f3a49a82a7cd239aa3065bb0}{dEdu}}.setZero(\mbox{\hyperlink{a01492_a41e2a568f1739778e2277d5eec69cfce}{worldDim}} * numberOfNodes);}
\DoxyCodeLine{147     kin.\mbox{\hyperlink{a01500_adad74786f3a49a82a7cd239aa3065bb0}{dEdu}} << -\/A1 -\/ ud1, A1 + ud1;}
\DoxyCodeLine{148     kin.\mbox{\hyperlink{a01500_adad74786f3a49a82a7cd239aa3065bb0}{dEdu}} /= Lsquared;}
\DoxyCodeLine{149 }
\DoxyCodeLine{150     \textcolor{comment}{// Second derivative of Egl w.r.t displacements}}
\DoxyCodeLine{151     kin.\mbox{\hyperlink{a01500_a0647f4c61cc8ee370d1b3b795a48c8e6}{ddEddu}}.setIdentity(\mbox{\hyperlink{a01492_a41e2a568f1739778e2277d5eec69cfce}{worldDim}} * numberOfNodes, \mbox{\hyperlink{a01492_a41e2a568f1739778e2277d5eec69cfce}{worldDim}} * numberOfNodes);}
\DoxyCodeLine{152     kin.\mbox{\hyperlink{a01500_a0647f4c61cc8ee370d1b3b795a48c8e6}{ddEddu}}.template topRightCorner<worldDim, worldDim>()   = -\/Eigen::Matrix<ST, worldDim, worldDim>::Identity();}
\DoxyCodeLine{153     kin.\mbox{\hyperlink{a01500_a0647f4c61cc8ee370d1b3b795a48c8e6}{ddEddu}}.template bottomLeftCorner<worldDim, worldDim>() = -\/Eigen::Matrix<ST, worldDim, worldDim>::Identity();}
\DoxyCodeLine{154     kin.\mbox{\hyperlink{a01500_a0647f4c61cc8ee370d1b3b795a48c8e6}{ddEddu}} /= Lsquared;}
\DoxyCodeLine{155 }
\DoxyCodeLine{156     \textcolor{keywordflow}{return} kin;}
\DoxyCodeLine{157   \}}
\DoxyCodeLine{158 }
\DoxyCodeLine{159   \textcolor{keyword}{using }\mbox{\hyperlink{a01492_afa14901625adeb7a2445717177c53779}{SupportedResultTypes}} =}
\DoxyCodeLine{160       std::tuple<decltype(makeRT<ResultTypes::cauchyAxialForce>()), \textcolor{keyword}{decltype}(makeRT<ResultTypes::PK2AxialForce>()),}
\DoxyCodeLine{161                  \textcolor{keyword}{decltype}(makeRT<ResultTypes::linearAxialForce>())>;}
\DoxyCodeLine{162 }
\DoxyCodeLine{163 \textcolor{keyword}{private}:}
\DoxyCodeLine{164   \textcolor{keyword}{template} <\textcolor{keyword}{template} <\textcolor{keyword}{typename}, \textcolor{keywordtype}{int}, \textcolor{keywordtype}{int}> \textcolor{keyword}{class }RT>}
\DoxyCodeLine{165   \textcolor{keyword}{static} \textcolor{keyword}{consteval} \textcolor{keywordtype}{bool} canProvideResultType() \{}
\DoxyCodeLine{166     \textcolor{keywordflow}{return} isSameResultType<RT, ResultTypes::cauchyAxialForce> or isSameResultType<RT, ResultTypes::PK2AxialForce> or}
\DoxyCodeLine{167            isSameResultType<RT, ResultTypes::linearAxialForce>;}
\DoxyCodeLine{168   \}}
\DoxyCodeLine{169 }
\DoxyCodeLine{170 \textcolor{keyword}{public}:}
\DoxyCodeLine{181   \textcolor{keyword}{template} <\textcolor{keyword}{template} <\textcolor{keyword}{typename}, \textcolor{keywordtype}{int}, \textcolor{keywordtype}{int}> \textcolor{keyword}{class }RT>}
\DoxyCodeLine{182   \textcolor{keyword}{requires}(canProvideResultType<RT>())}
\DoxyCodeLine{183   \textcolor{keyword}{auto} \mbox{\hyperlink{a01492_a59eb1590135f73b201e4780907cbd35e}{calculateAtImpl}}(\textcolor{keyword}{const} \mbox{\hyperlink{a01344}{Requirement}}\& req, [[maybe\_unused]] \textcolor{keyword}{const} \mbox{\hyperlink{a01692}{Dune::FieldVector<double, Traits::mydim>}}\& local,}
\DoxyCodeLine{184                        Dune::PriorityTag<0>) \textcolor{keyword}{const} \{}
\DoxyCodeLine{185     \textcolor{keyword}{using }RTWrapper                            = \mbox{\hyperlink{a01368}{ResultWrapper<RT<double, myDim, myDim>}}, \mbox{\hyperlink{a00363_acfb09bb7db104db62d3d1d2dc3e009b2a57dea6f5039281b7fee517fc43bf3110}{ResultShape::Vector}}>;}
\DoxyCodeLine{186     \textcolor{keyword}{const} \textcolor{keyword}{auto} [L, l, Elin, Egl, dEdu, ddEddu] = \mbox{\hyperlink{a01492_aeab583c651a9704392133a98e58e6ad4}{computeStrain}}(req);}
\DoxyCodeLine{187     \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (isSameResultType<RT, ResultTypes::cauchyAxialForce>) \{}
\DoxyCodeLine{188       \textcolor{keyword}{auto} N = Eigen::Vector<double, 1>\{E * A * Egl * l / L\}; \textcolor{comment}{// Axial force in deformed configuration}}
\DoxyCodeLine{189       \textcolor{keywordflow}{return} RTWrapper\{N\};}
\DoxyCodeLine{190     \}}
\DoxyCodeLine{191     \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (isSameResultType<RT, ResultTypes::PK2AxialForce>) \{}
\DoxyCodeLine{192       \textcolor{keyword}{auto} N = Eigen::Vector<double, 1>\{E * A * Egl\}; \textcolor{comment}{// Axial force in undeformed configuration}}
\DoxyCodeLine{193       \textcolor{keywordflow}{return} RTWrapper\{N\};}
\DoxyCodeLine{194     \}}
\DoxyCodeLine{195     \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (isSameResultType<RT, ResultTypes::linearAxialForce>) \{}
\DoxyCodeLine{196       \textcolor{keyword}{auto} N = Eigen::Vector<double, 1>\{E * A * Elin\};}
\DoxyCodeLine{197       \textcolor{keywordflow}{return} RTWrapper\{N\};}
\DoxyCodeLine{198     \}}
\DoxyCodeLine{199   \}}
\DoxyCodeLine{200 }
\DoxyCodeLine{201 \textcolor{keyword}{private}:}
\DoxyCodeLine{202   \textcolor{comment}{//> CRTP}}
\DoxyCodeLine{203   \textcolor{keyword}{const} \textcolor{keyword}{auto}\& underlying()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{a01312}{FE}}\&\textcolor{keyword}{>}(*this); \}}
\DoxyCodeLine{204   \textcolor{keyword}{auto}\& underlying() \{ \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}FE\&\textcolor{keyword}{>}(*this); \}}
\DoxyCodeLine{205 }
\DoxyCodeLine{206   \textcolor{keywordtype}{double} E;}
\DoxyCodeLine{207   \textcolor{keywordtype}{double} A;}
\DoxyCodeLine{208 }
\DoxyCodeLine{209 \textcolor{keyword}{protected}:}
\DoxyCodeLine{210   \textcolor{keyword}{template} <\textcolor{keyword}{typename} ScalarType>}
\DoxyCodeLine{211   \textcolor{keywordtype}{void} \mbox{\hyperlink{a01492_a5955fba6251da3eda818f6c14ef5ca73}{calculateMatrixImpl}}(}
\DoxyCodeLine{212       \textcolor{keyword}{const} \mbox{\hyperlink{a01344}{Requirement}}\& par, \textcolor{keyword}{const} \mbox{\hyperlink{a00363_a390d5311179ec61d163a29c943b3d1a0}{MatrixAffordance}}\& affordance, \textcolor{keyword}{typename} Traits::template MatrixType<> K,}
\DoxyCodeLine{213       \textcolor{keyword}{const} std::optional<std::reference\_wrapper<\textcolor{keyword}{const} Eigen::VectorX<ScalarType>>>\& dx = std::nullopt)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{214     \textcolor{keyword}{const} \textcolor{keyword}{auto} [L, l, Elin, Egl, dEdu, ddEddu] = \mbox{\hyperlink{a01492_aeab583c651a9704392133a98e58e6ad4}{computeStrain}}(par, dx);}
\DoxyCodeLine{215     K += E * A * L * (dEdu * dEdu.transpose() + ddEddu * Egl);}
\DoxyCodeLine{216   \}}
\DoxyCodeLine{217 }
\DoxyCodeLine{218   \textcolor{keyword}{template} <\textcolor{keyword}{typename} ScalarType>}
\DoxyCodeLine{219   \textcolor{keyword}{auto} \mbox{\hyperlink{a01492_ad11254e9306f1a740bab191314ee3108}{calculateScalarImpl}}(\textcolor{keyword}{const} \mbox{\hyperlink{a01344}{Requirement}}\& par, \mbox{\hyperlink{a00363_af6f894084edd9109762b86222995ef2a}{ScalarAffordance}} affordance,}
\DoxyCodeLine{220                            \textcolor{keyword}{const} std::optional<std::reference\_wrapper<\textcolor{keyword}{const} Eigen::VectorX<ScalarType>>>\& dx =}
\DoxyCodeLine{221                                std::nullopt) \textcolor{keyword}{const} -\/> ScalarType \{}
\DoxyCodeLine{222     \textcolor{keyword}{const} \textcolor{keyword}{auto} [L, l, Elin, Egl, dEdu, ddEddu] = \mbox{\hyperlink{a01492_aeab583c651a9704392133a98e58e6ad4}{computeStrain}}(par, dx);}
\DoxyCodeLine{223     \textcolor{keywordflow}{return} 0.5 * E * A * L * Egl * Egl;}
\DoxyCodeLine{224   \}}
\DoxyCodeLine{225 }
\DoxyCodeLine{226   \textcolor{keyword}{template} <\textcolor{keyword}{typename} ScalarType>}
\DoxyCodeLine{227   \textcolor{keywordtype}{void} \mbox{\hyperlink{a01492_a1c9876db9b831de421fe04750e11d9ed}{calculateVectorImpl}}(}
\DoxyCodeLine{228       \textcolor{keyword}{const} \mbox{\hyperlink{a01344}{Requirement}}\& par, \mbox{\hyperlink{a00363_aab9e3e38507d1db7602bc750718c302a}{VectorAffordance}} affordance, \textcolor{keyword}{typename} Traits::template VectorType<ScalarType> force,}
\DoxyCodeLine{229       \textcolor{keyword}{const} std::optional<std::reference\_wrapper<\textcolor{keyword}{const} Eigen::VectorX<ScalarType>>>\& dx = std::nullopt)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{230     \textcolor{keyword}{const} \textcolor{keyword}{auto} [L, l, Elin, Egl, dEdu, ddEddu] = \mbox{\hyperlink{a01492_aeab583c651a9704392133a98e58e6ad4}{computeStrain}}(par, dx);}
\DoxyCodeLine{231     force += E * A * Egl * L * dEdu;}
\DoxyCodeLine{232   \}}
\DoxyCodeLine{233 \};}
\DoxyCodeLine{234 }
\DoxyCodeLine{241 \textcolor{keyword}{inline} \textcolor{keyword}{auto} \mbox{\hyperlink{a00363_a1936b02a190200901c54cc8b1004506e}{truss}}(\textcolor{keyword}{const} \textcolor{keywordtype}{double} E, \textcolor{keyword}{const} \textcolor{keywordtype}{double} A) \{}
\DoxyCodeLine{242   \mbox{\hyperlink{a01496}{TrussPre}} pre(E, A);}
\DoxyCodeLine{243 }
\DoxyCodeLine{244   \textcolor{keywordflow}{return} pre;}
\DoxyCodeLine{245 \}}
\DoxyCodeLine{246 \} \textcolor{comment}{// namespace Ikarus}}

\end{DoxyCode}

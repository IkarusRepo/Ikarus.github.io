\hypertarget{a00248_source}{}\doxysection{adaptivestepsizing.\+hh}
\label{a00248_source}\index{adaptivestepsizing.hh@{adaptivestepsizing.hh}}
\mbox{\hyperlink{a00248}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// SPDX-\/FileCopyrightText: 2021-\/2024 The Ikarus Developers mueller@ibb.uni-\/stuttgart.de}}
\DoxyCodeLine{2 \textcolor{comment}{// SPDX-\/License-\/Identifier: LGPL-\/3.0-\/or-\/later}}
\DoxyCodeLine{3 }
\DoxyCodeLine{12 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{a00260}{ikarus/controlroutines/pathfollowingfunctions.hh}}>}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{a00230}{ikarus/solver/nonlinearsolver/solverinfos.hh}}>}}
\DoxyCodeLine{16 }
\DoxyCodeLine{17 \textcolor{keyword}{namespace }\mbox{\hyperlink{a00311}{Ikarus::AdaptiveStepSizing}} \{}
\DoxyCodeLine{18 }
\DoxyCodeLine{24   \textcolor{keyword}{struct }\mbox{\hyperlink{a01170}{NoOp}} \{}
\DoxyCodeLine{34     \textcolor{keyword}{template} <\textcolor{keyword}{typename} NonLinearOperator>}
\DoxyCodeLine{35     \textcolor{keywordtype}{void} \mbox{\hyperlink{a01170_ada90a32692ed0e5c05867ca427e38d18}{operator()}}(\textcolor{keyword}{const} \mbox{\hyperlink{a01422}{NonLinearSolverInformation}}\& solverInfo, \mbox{\hyperlink{a01190}{SubsidiaryArgs}}\& subsidiaryArgs,}
\DoxyCodeLine{36                     \textcolor{keyword}{const} \mbox{\hyperlink{a01534}{NonLinearOperator}}\& nonLinearOperator) \{\}}
\DoxyCodeLine{37 }
\DoxyCodeLine{42     [[nodiscard]] \textcolor{keywordtype}{int} \mbox{\hyperlink{a01170_af42dff6b9945230918607a14f159e52e}{targetIterations}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} 0; \}}
\DoxyCodeLine{43 }
\DoxyCodeLine{48     \textcolor{keywordtype}{void} \mbox{\hyperlink{a01170_aae9af895e735c2c5f87a9e2eb77aa737}{setTargetIterations}}([[maybe\_unused]] \textcolor{keywordtype}{int} \mbox{\hyperlink{a01170_af42dff6b9945230918607a14f159e52e}{targetIterations}}) \{\}}
\DoxyCodeLine{49   \};}
\DoxyCodeLine{50 }
\DoxyCodeLine{61   \textcolor{keyword}{struct }\mbox{\hyperlink{a01174}{IterationBased}} \{}
\DoxyCodeLine{71     \textcolor{keyword}{template} <\textcolor{keyword}{typename} NonLinearOperator>}
\DoxyCodeLine{72     \textcolor{keywordtype}{void} \mbox{\hyperlink{a01174_adbaaeb5daa06234f1886efa3f7bc8f1a}{operator()}}(\textcolor{keyword}{const} \mbox{\hyperlink{a01422}{NonLinearSolverInformation}}\& solverInfo, \mbox{\hyperlink{a01190}{SubsidiaryArgs}}\& subsidiaryArgs,}
\DoxyCodeLine{73                     \textcolor{keyword}{const} \mbox{\hyperlink{a01534}{NonLinearOperator}}\&) \{}
\DoxyCodeLine{74       \textcolor{keywordflow}{if} (subsidiaryArgs.\mbox{\hyperlink{a01190_a217c729e1ae8b05a98c852f19b0d6ae5}{currentStep}} == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{75       \textcolor{keywordflow}{if} (targetIterations\_ == 0)}
\DoxyCodeLine{76         DUNE\_THROW(Dune::InvalidStateException,}
\DoxyCodeLine{77                    \textcolor{stringliteral}{"{}For IterationBased, targetIterations should not be equal to 0. Try calling "{}}}
\DoxyCodeLine{78                    \textcolor{stringliteral}{"{}setTargetIterations(int) first."{}});}
\DoxyCodeLine{79       \textcolor{keyword}{const} \textcolor{keyword}{auto} previousIterations = solverInfo.\mbox{\hyperlink{a01422_a81570cd3d9f6589a4d1ba81211f41b99}{iterations}};}
\DoxyCodeLine{80       \textcolor{keywordflow}{if} (previousIterations > targetIterations\_)}
\DoxyCodeLine{81         subsidiaryArgs.\mbox{\hyperlink{a01190_a9c0bca7ed999dcf751648d41b5d9aa78}{stepSize}}}
\DoxyCodeLine{82             = sqrt(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(targetIterations\_) / previousIterations) * subsidiaryArgs.\mbox{\hyperlink{a01190_a9c0bca7ed999dcf751648d41b5d9aa78}{stepSize}};}
\DoxyCodeLine{83     \}}
\DoxyCodeLine{84 }
\DoxyCodeLine{89     [[nodiscard]] \textcolor{keywordtype}{int} \mbox{\hyperlink{a01174_aabdaad05b950b53e014624271a16fd9c}{targetIterations}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} targetIterations\_; \}}
\DoxyCodeLine{90 }
\DoxyCodeLine{95     \textcolor{keywordtype}{void} \mbox{\hyperlink{a01174_a52017ebcd89859d5ae214cc8767ef78d}{setTargetIterations}}(\textcolor{keywordtype}{int} \mbox{\hyperlink{a01174_aabdaad05b950b53e014624271a16fd9c}{targetIterations}}) \{ targetIterations\_ = \mbox{\hyperlink{a01174_aabdaad05b950b53e014624271a16fd9c}{targetIterations}}; \}}
\DoxyCodeLine{96 }
\DoxyCodeLine{97   \textcolor{keyword}{private}:}
\DoxyCodeLine{98     \textcolor{keywordtype}{int} targetIterations\_\{0\};}
\DoxyCodeLine{99   \};}
\DoxyCodeLine{100 \}  \textcolor{comment}{// namespace Ikarus::AdaptiveStepSizing}}

\end{DoxyCode}
